<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriTrack Pro - Tu Dieta Personalizada</title>
    <meta name="description"
        content="Aplicaci√≥n de seguimiento nutricional para alcanzar tus objetivos de composici√≥n corporal">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Splash/Onboarding Screen -->
    <div id="onboarding" class="screen active">
        <div class="onboarding-container">
            <div class="logo-section">
                <div class="logo-icon">
                    <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="45" stroke="url(#gradient1)" stroke-width="6" />
                        <path d="M30 55 L45 70 L75 35" stroke="url(#gradient1)" stroke-width="6" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <defs>
                            <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#6366f1" />
                                <stop offset="100%" style="stop-color:#8b5cf6" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <h1 class="app-title">NutriTrack<span>Pro</span></h1>
                <p class="app-subtitle">Tu camino hacia la composici√≥n corporal ideal</p>
            </div>

            <div class="onboarding-steps">
                <!-- Step 1: Personal Data -->
                <div class="step active" data-step="1">
                    <h2>üìä Datos Personales</h2>
                    <p class="step-description">Cu√©ntanos sobre ti para calcular tus necesidades</p>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="name">Nombre</label>
                            <input type="text" id="name" placeholder="Tu nombre" required>
                        </div>
                        <div class="form-group">
                            <label for="age">Edad</label>
                            <input type="number" id="age" placeholder="25" min="15" max="100" required>
                        </div>
                        <div class="form-group">
                            <label for="sex">Sexo</label>
                            <select id="sex" required>
                                <option value="">Seleccionar</option>
                                <option value="male">Masculino</option>
                                <option value="female">Femenino</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="height">Altura (cm)</label>
                            <input type="number" id="height" placeholder="175" min="100" max="250" required>
                        </div>
                        <div class="form-group">
                            <label for="weight">Peso actual (kg)</label>
                            <input type="number" id="weight" placeholder="80" min="30" max="300" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="bodyfat">% Grasa corporal (opcional)</label>
                            <input type="number" id="bodyfat" placeholder="20" min="5" max="60" step="0.1">
                        </div>
                    </div>
                </div>

                <!-- Step 2: Activity Level -->
                <div class="step" data-step="2">
                    <h2>üèÉ Nivel de Actividad</h2>
                    <p class="step-description">¬øCu√°nto te mueves en tu d√≠a a d√≠a?</p>

                    <div class="activity-options">
                        <label class="activity-card">
                            <input type="radio" name="activity" value="1.2">
                            <div class="card-content">
                                <span class="activity-icon">üõãÔ∏è</span>
                                <span class="activity-title">Sedentario</span>
                                <span class="activity-desc">Trabajo de oficina, poco ejercicio</span>
                            </div>
                        </label>
                        <label class="activity-card">
                            <input type="radio" name="activity" value="1.375">
                            <div class="card-content">
                                <span class="activity-icon">üö∂</span>
                                <span class="activity-title">Ligera actividad</span>
                                <span class="activity-desc">Ejercicio 1-3 d√≠as/semana</span>
                            </div>
                        </label>
                        <label class="activity-card">
                            <input type="radio" name="activity" value="1.55">
                            <div class="card-content">
                                <span class="activity-icon">üèãÔ∏è</span>
                                <span class="activity-title">Moderadamente activo</span>
                                <span class="activity-desc">Ejercicio 3-5 d√≠as/semana</span>
                            </div>
                        </label>
                        <label class="activity-card">
                            <input type="radio" name="activity" value="1.725">
                            <div class="card-content">
                                <span class="activity-icon">üî•</span>
                                <span class="activity-title">Muy activo</span>
                                <span class="activity-desc">Ejercicio intenso 6-7 d√≠as/semana</span>
                            </div>
                        </label>
                        <label class="activity-card">
                            <input type="radio" name="activity" value="1.9">
                            <div class="card-content">
                                <span class="activity-icon">üí™</span>
                                <span class="activity-title">Atleta</span>
                                <span class="activity-desc">Entrenamiento 2x/d√≠a o trabajo f√≠sico</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Step 3: Goals -->
                <div class="step" data-step="3">
                    <h2>üéØ Tu Objetivo</h2>
                    <p class="step-description">¬øQu√© quieres conseguir?</p>

                    <div class="goal-options">
                        <label class="goal-card">
                            <input type="radio" name="goal" value="aggressive">
                            <div class="card-content">
                                <span class="goal-icon">‚ö°</span>
                                <span class="goal-title">P√©rdida Agresiva</span>
                                <span class="goal-desc">-750 kcal/d√≠a (~0.7kg/semana)</span>
                            </div>
                        </label>
                        <label class="goal-card">
                            <input type="radio" name="goal" value="moderate">
                            <div class="card-content">
                                <span class="goal-icon">üéØ</span>
                                <span class="goal-title">P√©rdida Moderada</span>
                                <span class="goal-desc">-500 kcal/d√≠a (~0.5kg/semana)</span>
                            </div>
                        </label>
                        <label class="goal-card">
                            <input type="radio" name="goal" value="slow">
                            <div class="card-content">
                                <span class="goal-icon">üê¢</span>
                                <span class="goal-title">P√©rdida Lenta</span>
                                <span class="goal-desc">-250 kcal/d√≠a (~0.25kg/semana)</span>
                            </div>
                        </label>
                        <label class="goal-card">
                            <input type="radio" name="goal" value="maintain">
                            <div class="card-content">
                                <span class="goal-icon">‚öñÔ∏è</span>
                                <span class="goal-title">Mantener</span>
                                <span class="goal-desc">Recomposici√≥n corporal</span>
                            </div>
                        </label>
                    </div>

                    <div class="target-weight-section">
                        <div class="form-group">
                            <label for="targetWeight">Peso objetivo (kg)</label>
                            <input type="number" id="targetWeight" placeholder="75" min="30" max="200" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="targetBf">% Grasa objetivo (opcional)</label>
                            <input type="number" id="targetBf" placeholder="12" min="5" max="40" step="0.1">
                        </div>
                    </div>
                </div>

                <!-- Step 4: Results -->
                <div class="step" data-step="4">
                    <h2>‚ú® Tu Plan Personalizado</h2>
                    <p class="step-description">Basado en tus datos, estos son tus objetivos diarios</p>

                    <div class="results-summary">
                        <div class="result-card main-calories">
                            <div class="result-value" id="resultCalories">2550</div>
                            <div class="result-label">kcal/d√≠a</div>
                            <div class="result-breakdown">
                                <span>TMB: <span id="resultTMB">1850</span> kcal</span>
                                <span>TDEE: <span id="resultTDEE">2850</span> kcal</span>
                            </div>
                        </div>

                        <div class="macros-grid">
                            <div class="result-card protein">
                                <div class="macro-icon">ü•©</div>
                                <div class="result-value" id="resultProtein">200</div>
                                <div class="result-label">g Prote√≠na</div>
                                <div class="result-percent" id="resultProteinPct">31%</div>
                            </div>
                            <div class="result-card carbs">
                                <div class="macro-icon">üçö</div>
                                <div class="result-value" id="resultCarbs">230</div>
                                <div class="result-label">g Carbohidratos</div>
                                <div class="result-percent" id="resultCarbsPct">36%</div>
                            </div>
                            <div class="result-card fats">
                                <div class="macro-icon">ü•ë</div>
                                <div class="result-value" id="resultFats">75</div>
                                <div class="result-label">g Grasas</div>
                                <div class="result-percent" id="resultFatsPct">26%</div>
                            </div>
                        </div>

                        <div class="projection-info">
                            <p>üìÖ Tiempo estimado para tu objetivo: <strong id="projectedTime">12 semanas</strong></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-navigation">
                <button class="btn btn-secondary" id="prevBtn" style="visibility: hidden;">
                    <span>‚Üê</span> Anterior
                </button>
                <div class="step-indicators">
                    <span class="indicator active"></span>
                    <span class="indicator"></span>
                    <span class="indicator"></span>
                    <span class="indicator"></span>
                </div>
                <button class="btn btn-primary" id="nextBtn">
                    Siguiente <span>‚Üí</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="screen">
        <header class="main-header">
            <div class="header-left">
                <h1 class="header-title">NutriTrack<span>Pro</span></h1>
            </div>
            <div class="header-right">
                <button class="btn-icon" id="settingsBtn" title="Configuraci√≥n">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                </button>
                <div class="user-greeting">
                    <span id="userGreeting">Hola, Usuario</span>
                    <span class="current-date" id="currentDate">22 Enero 2026</span>
                </div>
            </div>
        </header>

        <main class="dashboard-content">
            <!-- Daily Summary Card -->
            <section class="daily-summary">
                <div class="summary-header">
                    <h2>üìä Resumen del D√≠a</h2>
                    <input type="date" id="selectedDate" class="date-picker">
                </div>

                <div class="calories-ring-container">
                    <div class="calories-ring">
                        <svg viewBox="0 0 200 200">
                            <circle cx="100" cy="100" r="85" class="ring-bg" />
                            <circle cx="100" cy="100" r="85" class="ring-progress" id="caloriesRing"
                                stroke-dasharray="534" stroke-dashoffset="534" />
                        </svg>
                        <div class="ring-content">
                            <span class="remaining-calories" id="remainingCalories">2550</span>
                            <span class="remaining-label">restantes</span>
                        </div>
                    </div>
                    <div class="calories-info">
                        <div class="calorie-stat">
                            <span class="stat-label">Objetivo</span>
                            <span class="stat-value" id="goalCaloriesDisplay">2550</span>
                        </div>
                        <div class="calorie-stat consumed">
                            <span class="stat-label">Consumidas</span>
                            <span class="stat-value" id="consumedCalories">0</span>
                        </div>
                    </div>
                </div>

                <div class="macros-bars">
                    <div class="macro-bar-item">
                        <div class="macro-bar-header">
                            <span class="macro-name">ü•© Prote√≠na</span>
                            <span class="macro-values"><span id="proteinConsumed">0</span> / <span
                                    id="proteinGoal">200</span>g</span>
                        </div>
                        <div class="progress-bar protein-bar">
                            <div class="progress-fill" id="proteinProgress"></div>
                        </div>
                    </div>
                    <div class="macro-bar-item">
                        <div class="macro-bar-header">
                            <span class="macro-name">üçö Carbohidratos</span>
                            <span class="macro-values"><span id="carbsConsumed">0</span> / <span
                                    id="carbsGoal">230</span>g</span>
                        </div>
                        <div class="progress-bar carbs-bar">
                            <div class="progress-fill" id="carbsProgress"></div>
                        </div>
                    </div>
                    <div class="macro-bar-item">
                        <div class="macro-bar-header">
                            <span class="macro-name">ü•ë Grasas</span>
                            <span class="macro-values"><span id="fatsConsumed">0</span> / <span
                                    id="fatsGoal">75</span>g</span>
                        </div>
                        <div class="progress-bar fats-bar">
                            <div class="progress-fill" id="fatsProgress"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Meals Section -->
            <section class="meals-section">
                <h2>üçΩÔ∏è Comidas del D√≠a</h2>

                <div class="meals-container">
                    <div class="meal-card" data-meal="Desayuno">
                        <div class="meal-header">
                            <div class="meal-info">
                                <span class="meal-icon">üåÖ</span>
                                <span class="meal-name">Desayuno</span>
                            </div>
                            <span class="meal-calories" id="desayunoCalories">0 kcal</span>
                        </div>
                        <div class="meal-items" id="desayunoItems">
                            <p class="empty-meal">Sin alimentos a√±adidos</p>
                        </div>
                        <button class="btn-add-food" onclick="openFoodModal('Desayuno')">
                            <span>+</span> A√±adir alimento
                        </button>
                    </div>

                    <div class="meal-card" data-meal="Comida">
                        <div class="meal-header">
                            <div class="meal-info">
                                <span class="meal-icon">‚òÄÔ∏è</span>
                                <span class="meal-name">Comida</span>
                            </div>
                            <span class="meal-calories" id="comidaCalories">0 kcal</span>
                        </div>
                        <div class="meal-items" id="comidaItems">
                            <p class="empty-meal">Sin alimentos a√±adidos</p>
                        </div>
                        <button class="btn-add-food" onclick="openFoodModal('Comida')">
                            <span>+</span> A√±adir alimento
                        </button>
                    </div>

                    <div class="meal-card" data-meal="Merienda">
                        <div class="meal-header">
                            <div class="meal-info">
                                <span class="meal-icon">üå§Ô∏è</span>
                                <span class="meal-name">Merienda</span>
                            </div>
                            <span class="meal-calories" id="meriendaCalories">0 kcal</span>
                        </div>
                        <div class="meal-items" id="meriendaItems">
                            <p class="empty-meal">Sin alimentos a√±adidos</p>
                        </div>
                        <button class="btn-add-food" onclick="openFoodModal('Merienda')">
                            <span>+</span> A√±adir alimento
                        </button>
                    </div>

                    <div class="meal-card" data-meal="Cena">
                        <div class="meal-header">
                            <div class="meal-info">
                                <span class="meal-icon">üåô</span>
                                <span class="meal-name">Cena</span>
                            </div>
                            <span class="meal-calories" id="cenaCalories">0 kcal</span>
                        </div>
                        <div class="meal-items" id="cenaItems">
                            <p class="empty-meal">Sin alimentos a√±adidos</p>
                        </div>
                        <button class="btn-add-food" onclick="openFoodModal('Cena')">
                            <span>+</span> A√±adir alimento
                        </button>
                    </div>
                </div>
            </section>

            <!-- Diet Generator Section -->
            <section class="diet-generator-section">
                <div class="section-header">
                    <h2>ü™Ñ Generador de Dietas</h2>
                    <button class="btn btn-primary" onclick="openDietGeneratorModal()">
                        ‚ú® Crear dieta autom√°tica
                    </button>
                </div>
                <p class="section-description">
                    ¬øNo sabes qu√© comer? Selecciona los alimentos que te gustan y te generamos planes de comida
                    equilibrados autom√°ticamente.
                </p>

                <!-- Saved Meal Plans -->
                <div class="saved-plans-container">
                    <h3>üìã Mis Planes Guardados</h3>
                    <div class="saved-plans-list" id="savedPlansList">
                        <div class="empty-plans">
                            <span class="empty-icon">üìù</span>
                            <p>A√∫n no tienes planes guardados</p>
                            <p class="hint">Genera tu primera dieta autom√°tica para empezar</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Stats -->
            <section class="quick-stats">
                <h2>üìà Tu Progreso</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-icon">üìÖ</span>
                        <span class="stat-value" id="daysTracked">0</span>
                        <span class="stat-label">D√≠as registrados</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üî•</span>
                        <span class="stat-value" id="currentStreak">0</span>
                        <span class="stat-label">Racha actual</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">‚öñÔ∏è</span>
                        <span class="stat-value" id="weightChange">0</span>
                        <span class="stat-label">kg desde inicio</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üéØ</span>
                        <span class="stat-value" id="avgAdherence">0%</span>
                        <span class="stat-label">Adherencia media</span>
                    </div>
                </div>
            </section>

            <!-- Weight Log -->
            <section class="weight-section">
                <div class="section-header">
                    <h2>‚öñÔ∏è Registro de Peso</h2>
                    <button class="btn btn-primary btn-sm" onclick="openWeightModal()">
                        + A√±adir peso
                    </button>
                </div>
                <div class="weight-chart-container">
                    <canvas id="weightChart"></canvas>
                </div>
            </section>
        </main>
    </div>

    <!-- Food Modal -->
    <div id="foodModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üçé A√±adir alimento a <span id="modalMealName">Desayuno</span></h3>
                <button class="btn-close" onclick="closeFoodModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="search-container">
                    <input type="text" id="foodSearch" placeholder="Buscar alimento..." class="search-input">
                    <div class="search-icon">üîç</div>
                </div>

                <div class="food-categories">
                    <button class="category-btn active" data-category="all">Todos</button>
                    <button class="category-btn" data-category="protein">Prote√≠nas</button>
                    <button class="category-btn" data-category="carbs">Carbohidratos</button>
                    <button class="category-btn" data-category="fats">Grasas</button>
                    <button class="category-btn" data-category="custom">Mis alimentos</button>
                </div>

                <div class="food-list" id="foodList">
                    <!-- Foods will be dynamically inserted here -->
                </div>

                <div class="selected-food-panel" id="selectedFoodPanel" style="display: none;">
                    <h4 id="selectedFoodName">Pechuga de Pollo</h4>
                    <div class="food-nutrition">
                        <div class="nutrition-item">
                            <span class="nutrition-value" id="selectedKcal">165</span>
                            <span class="nutrition-label">kcal</span>
                        </div>
                        <div class="nutrition-item protein">
                            <span class="nutrition-value" id="selectedProtein">31</span>
                            <span class="nutrition-label">g prot</span>
                        </div>
                        <div class="nutrition-item carbs">
                            <span class="nutrition-value" id="selectedCarbs">0</span>
                            <span class="nutrition-label">g carbs</span>
                        </div>
                        <div class="nutrition-item fats">
                            <span class="nutrition-value" id="selectedFats">3.6</span>
                            <span class="nutrition-label">g grasas</span>
                        </div>
                    </div>
                    <div class="quantity-input-group">
                        <label>Cantidad:</label>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="adjustQuantity(-10)">-</button>
                            <input type="number" id="foodQuantity" value="100" min="1" max="1000">
                            <button class="qty-btn" onclick="adjustQuantity(10)">+</button>
                        </div>
                        <span class="quantity-unit" id="quantityUnit">gramos</span>
                    </div>
                    <button class="btn btn-primary btn-full" onclick="addFoodToMeal()">
                        ‚úì A√±adir al <span id="addToMealName">Desayuno</span>
                    </button>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="openCustomFoodModal()">
                    ‚ûï Crear alimento personalizado
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Food Modal -->
    <div id="customFoodModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ú® Crear alimento personalizado</h3>
                <button class="btn-close" onclick="closeCustomFoodModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="customFoodName">Nombre del alimento</label>
                    <input type="text" id="customFoodName" placeholder="Ej: Mi batido proteico">
                </div>
                <div class="form-group">
                    <label for="customFoodServing">Tama√±o de porci√≥n</label>
                    <div class="serving-inputs">
                        <input type="number" id="customFoodServingSize" placeholder="100" value="100">
                        <select id="customFoodServingUnit">
                            <option value="g">gramos</option>
                            <option value="unit">unidad</option>
                            <option value="ml">ml</option>
                            <option value="scoop">scoop</option>
                        </select>
                    </div>
                </div>
                <p class="form-hint">Valores por porci√≥n:</p>
                <div class="nutrition-inputs">
                    <div class="form-group">
                        <label for="customKcal">Calor√≠as</label>
                        <input type="number" id="customKcal" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="customProtein">Prote√≠na (g)</label>
                        <input type="number" id="customProtein" placeholder="0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="customCarbs">Carbohidratos (g)</label>
                        <input type="number" id="customCarbs" placeholder="0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="customFats">Grasas (g)</label>
                        <input type="number" id="customFats" placeholder="0" step="0.1">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCustomFoodModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="saveCustomFood()">Guardar alimento</button>
            </div>
        </div>
    </div>

    <!-- Weight Modal -->
    <div id="weightModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3>‚öñÔ∏è Registrar peso</h3>
                <button class="btn-close" onclick="closeWeightModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="weightDate">Fecha</label>
                    <input type="date" id="weightDate">
                </div>
                <div class="form-group">
                    <label for="newWeight">Peso (kg)</label>
                    <input type="number" id="newWeight" placeholder="80.5" step="0.1" min="30" max="300">
                </div>
                <div class="form-group">
                    <label for="newBodyfat">% Grasa corporal (opcional)</label>
                    <input type="number" id="newBodyfat" placeholder="18" step="0.1" min="5" max="60">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeWeightModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="saveWeight()">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è Configuraci√≥n</h3>
                <button class="btn-close" onclick="closeSettingsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>üìä Objetivos Nutricionales</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="settingsCalories">Calor√≠as diarias</label>
                            <input type="number" id="settingsCalories" min="1000" max="5000">
                        </div>
                        <div class="form-group">
                            <label for="settingsProtein">Prote√≠na (g)</label>
                            <input type="number" id="settingsProtein" min="50" max="400">
                        </div>
                        <div class="form-group">
                            <label for="settingsCarbs">Carbohidratos (g)</label>
                            <input type="number" id="settingsCarbs" min="50" max="600">
                        </div>
                        <div class="form-group">
                            <label for="settingsFats">Grasas (g)</label>
                            <input type="number" id="settingsFats" min="20" max="200">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h4>üë§ Datos Personales</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="settingsName">Nombre</label>
                            <input type="text" id="settingsName">
                        </div>
                        <div class="form-group">
                            <label for="settingsWeight">Peso actual (kg)</label>
                            <input type="number" id="settingsWeight" step="0.1">
                        </div>
                    </div>
                </div>

                <div class="settings-section danger-zone">
                    <h4>‚ö†Ô∏è Zona de peligro</h4>
                    <button class="btn btn-danger" onclick="resetAllData()">
                        üóëÔ∏è Borrar todos los datos
                    </button>
                    <button class="btn btn-secondary" onclick="recalculateGoals()">
                        üîÑ Recalcular objetivos
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="saveSettings()">Guardar cambios</button>
            </div>
        </div>
    </div>

    <!-- Diet Generator Modal -->
    <div id="dietGeneratorModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>ü™Ñ Generador de Dieta Autom√°tica</h3>
                <button class="btn-close" onclick="closeDietGeneratorModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Step 1: Select favorite foods and assign to meals -->
                <div class="generator-step active" data-gen-step="1">
                    <div class="generator-intro">
                        <h4>Paso 1: Selecciona alimentos y as√≠gnalos a cada comida</h4>
                        <p>Marca los alimentos que quieres comer y selecciona en qu√© comidas del d√≠a los consumir√≠as
                            normalmente.</p>
                    </div>

                    <div class="food-assignment-container">
                        <div class="food-category-section">
                            <h5>ü•© Prote√≠nas</h5>
                            <div class="food-assignment-list" id="proteinSelection"></div>
                        </div>
                        <div class="food-category-section">
                            <h5>üçö Carbohidratos</h5>
                            <div class="food-assignment-list" id="carbsSelection"></div>
                        </div>
                        <div class="food-category-section">
                            <h5>ü•ë Grasas Saludables</h5>
                            <div class="food-assignment-list" id="fatsSelection"></div>
                        </div>
                    </div>

                    <div class="selection-summary">
                        <span id="selectedCount">0</span> alimentos asignados
                    </div>
                </div>

                <!-- Step 2: Configure plan -->
                <div class="generator-step" data-gen-step="2">
                    <div class="generator-intro">
                        <h4>Paso 2: Configura tu plan</h4>
                        <p>Personaliza c√≥mo quieres que sea tu dieta</p>
                    </div>

                    <div class="plan-config">
                        <div class="config-option">
                            <label>üìÖ D√≠as a generar</label>
                            <div class="days-selector">
                                <button class="day-btn active" data-days="1">1 d√≠a</button>
                                <button class="day-btn" data-days="3">3 d√≠as</button>
                                <button class="day-btn" data-days="7">7 d√≠as</button>
                            </div>
                        </div>

                        <div class="config-option">
                            <label>üçΩÔ∏è N√∫mero de comidas</label>
                            <div class="meals-selector">
                                <button class="meal-count-btn" data-meals="3">3 comidas</button>
                                <button class="meal-count-btn active" data-meals="4">4 comidas</button>
                                <button class="meal-count-btn" data-meals="5">5 comidas</button>
                            </div>
                        </div>

                        <div class="config-option">
                            <label>üéØ Distribuci√≥n de calor√≠as</label>
                            <div class="distribution-display">
                                <div class="dist-item">
                                    <span class="dist-meal">Desayuno</span>
                                    <span class="dist-pct" id="distDesayuno">25%</span>
                                </div>
                                <div class="dist-item">
                                    <span class="dist-meal">Comida</span>
                                    <span class="dist-pct" id="distComida">35%</span>
                                </div>
                                <div class="dist-item">
                                    <span class="dist-meal">Merienda</span>
                                    <span class="dist-pct" id="distMerienda">15%</span>
                                </div>
                                <div class="dist-item">
                                    <span class="dist-meal">Cena</span>
                                    <span class="dist-pct" id="distCena">25%</span>
                                </div>
                            </div>
                        </div>

                        <div class="goals-reminder">
                            <h5>Tus objetivos diarios:</h5>
                            <div class="goals-display">
                                <span>üî• <span id="genGoalKcal">2500</span> kcal</span>
                                <span>ü•© <span id="genGoalProt">200</span>g prot</span>
                                <span>üçö <span id="genGoalCarbs">230</span>g carbs</span>
                                <span>ü•ë <span id="genGoalFats">75</span>g grasas</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Generated plans -->
                <div class="generator-step" data-gen-step="3">
                    <div class="generator-intro">
                        <h4>‚ú® ¬°Tu dieta est√° lista!</h4>
                        <p>Hemos generado opciones de men√∫ equilibradas para ti. Puedes regenerar si quieres otras
                            opciones.</p>
                    </div>

                    <div class="generated-plans-container" id="generatedPlansContainer">
                        <!-- Generated plans will appear here -->
                    </div>

                    <div class="plan-actions">
                        <button class="btn btn-secondary" onclick="regeneratePlans()">
                            üîÑ Generar otras opciones
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer generator-footer">
                <button class="btn btn-secondary" id="genPrevBtn" onclick="prevGeneratorStep()"
                    style="visibility: hidden;">
                    ‚Üê Anterior
                </button>
                <div class="generator-indicators">
                    <span class="gen-indicator active"></span>
                    <span class="gen-indicator"></span>
                    <span class="gen-indicator"></span>
                </div>
                <button class="btn btn-primary" id="genNextBtn" onclick="nextGeneratorStep()">
                    Siguiente ‚Üí
                </button>
            </div>
        </div>
    </div>

    <!-- View Plan Modal -->
    <div id="viewPlanModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>üìã <span id="viewPlanTitle">Plan de Dieta</span></h3>
                <button class="btn-close" onclick="closeViewPlanModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="plan-detail-container" id="planDetailContainer">
                    <!-- Plan details will be shown here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="deleteSavedPlan()">
                    üóëÔ∏è Eliminar plan
                </button>
                <button class="btn btn-primary" onclick="applyPlanToday()">
                    ‚úì Aplicar al d√≠a de hoy
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>

</html>